import{q as e,o as a,s as l,d as t,e as s,m as n,t as i,p as o,F as c,i as r,k as u,l as v,x as d,y as p,u as g,b as m,n as h,z as f}from"./vendor-BY3Sjsd2.js";import{l as b,a as w,p as y,b as k,c as x,d as C}from"./fileUtils-DWjd_h8b.js";import{_ as T}from"./index-iMe6HISH.js";import"./marked-OaSDovvN.js";function E(){setTimeout(()=>{setTimeout(()=>{document.querySelectorAll(".copy-btn").forEach(e=>{e.dataset.init||(e.dataset.init="true",e.onclick=()=>{var a;const l=e.closest(".code-block"),t=(null==(a=l.querySelector(".code-content"))?void 0:a.textContent)||l.textContent;navigator.clipboard.writeText(t).then(()=>{e.innerHTML="âœ”",setTimeout(()=>{e.innerHTML="ðŸ“‹"},2e3)}).catch(a=>{e.innerHTML="âŒ"})})})},100),setTimeout(()=>{document.querySelectorAll(".fullscreen-btn").forEach(e=>{e.dataset.init||(e.dataset.init="true",e.onclick=()=>{const a=e.closest(".code-block");document.fullscreenEnabled?document.fullscreenElement?document.exitFullscreen():a.requestFullscreen().catch(e=>{}):alert("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒå…¨å±æ¨¡å¼")})})},100)},200)}const A={class:"blog-post-page page"},M={class:"container"},L={key:0,class:"state-container loading-state"},H={key:1,class:"state-container error-state"},q={key:2,class:"post-viewer"},B={class:"post-content-wrapper"},I={class:"post-header"},_={class:"post-title-large"},j={class:"post-meta-container"},D={class:"post-meta-top"},F={key:0,class:"post-original"},S={key:1,class:"post-repost"},z={class:"post-date"},O={class:"post-meta-detailed"},Y={class:"meta-item"},$={class:"post-content"},P=["innerHTML"],R={class:"post-footer-actions"},U={class:"tags-section"},V={class:"tags-list"},G={key:0,class:"post-navigation"},J={class:"nav-content"},K={class:"nav-title"},N={class:"nav-content"},Q={class:"nav-title"},W={key:0,class:"post-sidebar"},X={key:0,class:"sidebar-section toc-container"},Z={class:"toc-list"},ee=["href","onClick"],ae={key:1,class:"sidebar-section recommended-container"},le={class:"recommended-list"},te=["onClick"],se={class:"recommended-date"},ne={class:"recommended-title"},ie=T({__name:"BlogPost",setup(T){const ie=d(),oe=g(),ce=u([]),re=u(null),ue=u(""),ve=u(!1),de=u(""),pe=u(0),ge=u(""),me=u(null),he=v(()=>k(ue.value)),fe=v(()=>x(ue.value)),be=v(()=>C(ue.value)),we=v(()=>re.value&&re.value.tag?Array.isArray(re.value.tag)?re.value.tag:[re.value.tag]:[]),ye=v(()=>{if(!re.value||0===ce.value.length)return null;const e=ce.value.findIndex(e=>e.file===re.value.file);return e>0?ce.value[e-1]:null}),ke=v(()=>{if(!re.value||0===ce.value.length)return null;const e=ce.value.findIndex(e=>e.file===re.value.file);return e<ce.value.length-1?ce.value[e+1]:null}),xe=v(()=>{if(!re.value||0===ce.value.length)return[];const e=re.value.tag?Array.isArray(re.value.tag)?re.value.tag:[re.value.tag]:[];return ce.value.filter(a=>{if(a.file===re.value.file)return!1;const l=a.tag?Array.isArray(a.tag)?a.tag:[a.tag]:[];return e.some(e=>l.includes(e))}).sort((e,a)=>new Date(a.date)-new Date(e.date)).slice(0,5)}),Ce=async()=>{ve.value=!0,de.value="";try{ce.value=await b(),ce.value.sort((e,a)=>new Date(a.date)-new Date(e.date))}catch(e){de.value="æ— æ³•åŠ è½½æ–‡ç« åˆ—è¡¨"}finally{ve.value=!1}},Te=async e=>{ve.value=!0;try{const a=await w(e),{metadata:l,content:t}=y(a);ue.value=t,re.value={...l,file:e},window.scrollTo({top:0,behavior:"instant"}),p(()=>{E(),_e()})}catch(a){de.value="æ— æ³•åŠ è½½æ–‡ç« å†…å®¹"}finally{ve.value=!1}},Ee=()=>{oe.push("/blog")},Ae=()=>{ie.params.file?Te(ie.params.file):Ce()},Me=()=>window.scrollTo({top:0,behavior:"smooth"}),Le=()=>{const e=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;pe.value=Math.min(100,Math.max(0,e))},He=()=>{var e;navigator.share?navigator.share({title:null==(e=re.value)?void 0:e.title,url:window.location.href}).catch(()=>qe()):qe()},qe=()=>{navigator.clipboard.writeText(window.location.href).then(()=>alert("é“¾æŽ¥å·²å¤åˆ¶")).catch(()=>alert("å¤åˆ¶å¤±è´¥"))},Be=e=>{oe.push(`/blog/${e.file}`)};let Ie=null;const _e=()=>{var e;Ie&&Ie.disconnect();const a=null==(e=me.value)?void 0:e.querySelectorAll("h2, h3, h4");if(!a||0===a.length)return;Ie=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(ge.value=e.target.id)})},{root:null,rootMargin:"-100px 0px -60% 0px",threshold:0}),a.forEach(e=>Ie.observe(e))};return e(()=>ie.params.file,e=>{e&&Te(e)},{immediate:!0}),a(()=>{Ce(),window.addEventListener("scroll",Le)}),l(()=>{window.removeEventListener("scroll",Le),Ie&&Ie.disconnect()}),(e,a)=>{return m(),t("div",A,[a[17]||(a[17]=s("div",{class:"background-effects"},[s("div",{class:"gradient-overlay"})],-1)),s("div",{class:"reading-progress",style:n({width:pe.value+"%"})},null,4),s("main",M,[ve.value?(m(),t("div",L,[...a[2]||(a[2]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"åŠ è½½ä¸­...",-1)])])):de.value?(m(),t("div",H,[a[3]||(a[3]=s("div",{class:"error-icon"},"âŒ",-1)),a[4]||(a[4]=s("h3",null,"å‡ºé”™äº†",-1)),s("p",null,i(de.value),1),s("button",{class:"btn btn-primary",onClick:Ae},"é‡è¯•"),s("button",{class:"btn btn-outline",onClick:Ee},"è¿”å›žåˆ—è¡¨")])):(m(),t("div",q,[s("article",B,[s("div",{class:"post-nav-actions"},[s("button",{class:"btn btn-secondary back-btn",onClick:Ee},[...a[5]||(a[5]=[s("span",{class:"back-icon"},"â†",-1),s("span",null,"è¿”å›žåˆ—è¡¨",-1)])]),s("div",{class:"right-actions"},[s("button",{class:"action-btn",onClick:He,title:"åˆ†äº«"},[...a[6]||(a[6]=[s("svg",{t:"1769778989335",class:"icon",viewBox:"0 0 1233 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"54156",width:"18",height:"18"},[s("path",{d:"M106.729318 963.911564a21.561478 21.561478 0 0 1-7.035851-0.79437 49.477919 49.477919 0 0 1-42.101623-54.584585c24.171552-226.96293 104.516429-394.575054 237.85715-499.318446a624.885687 624.885687 0 0 1 361.041281-125.567241l29.618663-1.532V120.687538c0-63.946806 58.499695-77.961766 89.650357-46.811104L1139.921317 444.279936a90.217765 90.217765 0 0 1-2.32637 141.851831l-354.799801 361.041281a55.151992 55.151992 0 0 1-96.459245-38.186513v-172.77553h-36.654514c-133.340721 0-375.850612 26.497922-502.949853 205.117748a43.974068 43.974068 0 0 1-39.718512 22.696293z",fill:"#00BF7B","p-id":"54157"})],-1)])])])]),s("header",I,[s("h1",_,i(re.value.title),1),s("div",j,[s("div",D,[re.value.original&&(l=re.value,"1"===(null==l?void 0:l.original))?(m(),t("span",F,"åŽŸåˆ›")):re.value.original?(m(),t("span",S,"è½¬è½½")):o("",!0),(m(!0),t(c,null,r(we.value,e=>(m(),t("span",{key:e,class:"post-category"},i(e),1))),128)),s("span",z,i(re.value.date),1)]),s("div",O,[s("div",Y,[a[7]||(a[7]=s("span",{class:"meta-icon"},"â±ï¸",-1)),s("span",null,i(fe.value)+" åˆ†é’Ÿé˜…è¯»",1)])])]),a[8]||(a[8]=s("div",{class:"post-divider"},null,-1))]),s("div",$,[s("div",{class:"markdown-body",innerHTML:he.value,ref_key:"articleContent",ref:me},null,8,P)]),s("div",R,[s("div",U,[a[9]||(a[9]=s("h3",{class:"section-title"},"æ–‡ç« æ ‡ç­¾",-1)),s("div",V,[(m(!0),t(c,null,r(we.value,e=>(m(),t("span",{class:"tag",key:e},"#"+i(e),1))),128))])]),s("div",{class:"action-buttons"},[s("button",{class:"btn btn-outline",onClick:Me},[...a[10]||(a[10]=[s("span",{class:"top-icon"},"â†‘",-1),s("span",null,"è¿”å›žé¡¶éƒ¨",-1)])])])]),ye.value||ke.value?(m(),t("div",G,[ye.value?(m(),t("div",{key:0,class:"nav-item prev",onClick:a[0]||(a[0]=e=>Be(ye.value))},[a[12]||(a[12]=s("span",{class:"nav-arrow"},"â†",-1)),s("div",J,[a[11]||(a[11]=s("span",{class:"nav-label"},"ä¸Šä¸€ç¯‡",-1)),s("span",K,i(ye.value.title),1)])])):o("",!0),ke.value?(m(),t("div",{key:1,class:"nav-item next",onClick:a[1]||(a[1]=e=>Be(ke.value))},[s("div",N,[a[13]||(a[13]=s("span",{class:"nav-label"},"ä¸‹ä¸€ç¯‡",-1)),s("span",Q,i(ke.value.title),1)]),a[14]||(a[14]=s("span",{class:"nav-arrow"},"â†’",-1))])):o("",!0)])):o("",!0)]),be.value.length>0||xe.value.length>0?(m(),t("aside",W,[be.value.length>0?(m(),t("div",X,[a[15]||(a[15]=s("h3",{class:"sidebar-title"},"ç›®å½•",-1)),s("ul",Z,[(m(!0),t(c,null,r(be.value,e=>(m(),t("li",{key:e.id,class:h(["toc-item",`toc-level-${e.level}`,{active:ge.value===e.id}])},[s("a",{href:"#"+e.id,onClick:f(a=>(e=>{const a=document.getElementById(e);if(a){const l=80,t=a.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:t-l,behavior:"smooth"}),ge.value=e}})(e.id),["prevent"])},i(e.text),9,ee)],2))),128))])])):o("",!0),xe.value.length>0?(m(),t("div",ae,[a[16]||(a[16]=s("h3",{class:"sidebar-title"},"æŽ¨èé˜…è¯»",-1)),s("ul",le,[(m(!0),t(c,null,r(xe.value,e=>(m(),t("li",{key:e.file,class:"recommended-item",onClick:a=>Be(e)},[s("span",se,i(e.date),1),s("span",ne,i(e.title),1)],8,te))),128))])])):o("",!0)])):o("",!0)]))])]);var l}}},[["__scopeId","data-v-a5b7c003"]]);export{ie as default};
